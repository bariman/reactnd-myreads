(this["webpackJsonpreactnd-myreads"]=this["webpackJsonpreactnd-myreads"]||[]).push([[0],{20:function(e,t,o){},23:function(e,t,o){},24:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),s=o(13),c=o.n(s),r=(o(20),o(4)),i=o(5),l=o(7),u=o(6),b=o(9),h=o(2),j=o(1),d=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(r.a)(this,o);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.book.shelf},e.handleChange=function(t){e.setState({value:t.target.value}),e.props.moveBook(e.props.book,t.target.value)},e}return Object(i.a)(o,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"book-shelf-changer",children:Object(j.jsxs)("select",{value:this.state.value||"none",onChange:this.handleChange,children:[Object(j.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(j.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(j.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(j.jsx)("option",{value:"read",children:"Read"}),Object(j.jsx)("option",{value:"none",children:"None"})]})})}}]),o}(a.a.Component),k=d,p=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.book,o=e.moveBook,n=t.imageLinks?t.imageLinks.thumbnail:null;return Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"book-top",children:[Object(j.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(n,")")}}),Object(j.jsx)(k,{book:t,moveBook:o})]}),Object(j.jsx)("div",{className:"book-title",children:t.title}),Object(j.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.join(", ")})]})}}]),o}(a.a.Component),v=p,O=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this,t=this.props.books;return Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:this.props.bookshelf.title}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:t.map((function(t){return Object(j.jsx)("li",{className:"book",children:Object(j.jsx)(v,{book:t,moveBook:e.props.moveBook})},t.id)}))})})]})}}]),o}(a.a.Component),f=O,m=[{key:"currentlyReading",title:"Currently Reading"},{key:"wantToRead",title:"Want to Read"},{key:"read",title:"Read"}],y=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.myBooks,o=e.moveBook;return Object(j.jsxs)("div",{className:"list-books",children:[Object(j.jsx)("div",{className:"list-books-title",children:Object(j.jsx)("h1",{children:"MyReads"})}),Object(j.jsx)("div",{className:"list-books-content",children:Object(j.jsx)("div",{children:m.map((function(e){return Object(j.jsx)(f,{books:t.filter((function(t){return t.shelf===e.key})),bookshelf:e,moveBook:o},e.key)}))})}),Object(j.jsx)("div",{className:"open-search",children:Object(j.jsx)(b.b,{to:"search",children:"Add a book"})})]})}}]),o}(a.a.Component),x=y,g=o(10),N="https://reactnd-books-api.udacity.com",B=localStorage.token;B||(B=localStorage.token=Math.random().toString(36).substr(-8));var C={Accept:"application/json",Authorization:B},S=function(e,t){return fetch("".concat(N,"/books/").concat(e.id),{method:"PUT",headers:Object(g.a)(Object(g.a)({},C),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},R=function(e){return fetch("".concat(N,"/search"),{method:"POST",headers:Object(g.a)(Object(g.a)({},C),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},w=o(15),T=o.n(w),A=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(r.a)(this,o);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={books:[],query:""},e.updateQuery=function(t){e.setState((function(){return{query:t}})),""!==t?e.searchBooksDebounced(t):e.setState({books:[]})},e.searchBooks=function(t){console.log("call api"),R(t).then((function(t){!t||t.error?e.setState({books:[]}):e.setState({books:t})}))},e.searchBooksDebounced=T()(e.searchBooks,300),e}return Object(i.a)(o,[{key:"componentWillUnmount",value:function(){this.searchBooksDebounced.cancel()}},{key:"render",value:function(){var e=this,t=this.state.books,o=this.props.myBooks,n=t.map((function(e){return o.map((function(t){return t.id===e.id&&(e.shelf=t.shelf),t})),e}));return Object(j.jsxs)("div",{className:"search-books",children:[Object(j.jsxs)("div",{className:"search-books-bar",children:[Object(j.jsx)(b.b,{className:"close-search",to:"/",children:"Close"}),Object(j.jsx)("div",{className:"search-books-input-wrapper",children:Object(j.jsx)("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:function(t){return e.updateQuery(t.target.value)}})})]}),Object(j.jsx)("div",{className:"search-books-results",children:n.length?Object(j.jsx)("ol",{className:"books-grid",children:n.map((function(t){return Object(j.jsx)("li",{className:"book",children:Object(j.jsx)(v,{moveBook:e.props.moveBook,book:t})},t.id)}))}):Object(j.jsx)("p",{children:"No results"})})]})}}]),o}(a.a.Component),D=A,M=(o(23),function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(r.a)(this,o);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={books:[]},e.moveBook=function(t,o){S(t,o);var n=e.state.books.filter((function(e){return e.id!==t.id}));"none"!==o&&(t.shelf=o,n=n.concat(t)),e.setState({books:n})},e}return Object(i.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(N,"/books"),{headers:C}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState((function(){return{books:t}}))}))}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"app",children:Object(j.jsx)(b.a,{basename:"/",children:Object(j.jsxs)(h.c,{children:[Object(j.jsx)(h.a,{exact:!0,path:"/",element:Object(j.jsx)(x,{moveBook:this.moveBook,myBooks:this.state.books})}),Object(j.jsx)(h.a,{path:"/search",element:Object(j.jsx)(D,{moveBook:this.moveBook,myBooks:this.state.books})})]})})})}}]),o}(a.a.Component)),q=M,F=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,25)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;o(e),n(e),a(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(q,{})}),document.getElementById("root")),F()}},[[24,1,2]]]);
//# sourceMappingURL=main.2ec94a24.chunk.js.map